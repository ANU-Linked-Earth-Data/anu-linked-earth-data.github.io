"use strict";angular.module("services.config",[]).constant("config",{"sparql-endpoints":["//anulinkedearth.org/landsat/query"]}),angular.module("LEDApp",["services.config","ngRoute","ngMessages","rzModule","leaflet-directive","chart.js","color.picker"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/search.html",controller:"SearchController",controllerAs:"sc"}).otherwise({redirectTo:"/"})}]),angular.module("LEDApp").controller("SearchController",["SearchService","$scope","$compile","filterFilter",function(a,b,c,d){function e(a){var b=a.match(/-?\d+.?\d* -?\d+.?\d*,/g);return[b[0].match(/-?\d+.?\d*/g).reverse(),b[2].match(/-?\d+.?\d*/g).reverse()]}var f=this;this.hasSearched=!1;var g,h;f.bands=null;var i,j=[],k=[];f.layers=L.control.layers(null),f.visibleLayers=[],f.currentOverlay=[],f.imageDict=[],f.bandLayer=0,f.addedListener=!1,b.color_picker_options={format:"hex"},b.bandList=[],b.selected_bands=[],f.savedSelectedBands=[];var l=L.map("mapid",{zoomControl:!0}).setView([-34.6,148.33],9);i=l.getBounds(),l.zoomControl.setPosition("topright"),l.on("moveend",function(){i=l.getBounds(),f.refreshOverlay(h,g)}),l.on("click",function(a){f.onClick(f.imageDict[a.originalEvent.srcElement.currentSrc])}),L.tileLayer("https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}",{attribution:'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="http://mapbox.com">Mapbox</a>',maxZoom:18,id:"duo.034p8op4",accessToken:"pk.eyJ1IjoiZHVvIiwiYSI6ImNpbm52Y2lxdzB6emZ0dmx5MmNmNGZnejMifQ._yO4cALvQUPwvtVj_nUYEA"}).addTo(l),f.layers.addTo(l);var m=(L.control.sidebar("sidebar").addTo(l),L.control({position:"bottomright"}));m.onAdd=function(){var a=L.DomUtil.create("div"),d=L.DomUtil.create("div","",a);d.setAttribute("ng-include","'views/charts/barchart.html'");var e=b.$new();return c(a)(e),a};var n=$("#graphPane");n.load("views/charts/barchart.html");var o=b.$new();c(n.contents())(o),b.search=function(){},l.spin(!0),a.getDistinctTime().then(function(a){var c=[];f.dict=[],f.display=[];for(var d in a.results.bindings)c.push(a.results.bindings[d].timePeriod.value);for(d in c)f.dict[moment(c[d]).format("DD/MM/YY, h:mm:ss a")]=c[d],f.display.push(moment(c[d]).format("DD/MM/YY, h:mm:ss a"));c.length>0&&f.performQueryLimitTime(l.getZoom()-5,c[c.length-1]),b.sliderDate={value:f.display.length-1,showTicks:!0,options:{stepsArray:f.display,onStart:function(){},onChange:function(){},onEnd:function(){g!==f.dict[b.sliderDate.value]&&f.performQueryLimitTime(h,f.dict[f.display[b.sliderDate.value]])}}},l.spin(!1)});f.performQueryLimitTime=function(c,d){g=d,h=c,l.spin(!0),a.getDistinctBands().then(function(a){j=[],k=[],f.bands=a;for(var e in a)j.push([]),k.push([]),e>=b.bandList.length&&b.bandList.push({name:e.toString(),color:"#FF0000",selected:!1});f.setDefaultSettings(b.bandList),f.refreshOverlay(c,d),l.spin(!1)})},b.selectedBands=function(){return d(b.bandList,{selected:!0})},f.getBand=function(a){return d(b.selected_bands,{name:a})},b.$watch("bandList|filter:{selected:true}",function(a){b.selection=a.map(function(a){return a.name})},!0),f.onClick=function(a){var c=Number(a[0].lat.value),d=Number(a[0].lon.value);c=Math.round(100*(c+1e-5))/100,d=Math.round(100*(d+1e-5))/100,b.clickedImage=a[0],b.clickedImage.lat=c,b.clickedImage.lon=d,b.$broadcast("onSelectRegion",b.clickedImage.dggsCell.value,b.clickedImage.band.value)},f.displayLayers=function(a,b,c){f.visibleLayers.forEach(function(a){f.layers.removeLayer(a)}),null!=a&&(f.layers.addBaseLayer(a,"Landsat"),f.visibleLayers.push(a)),b.length>0&&(f.layers.addBaseLayer(L.layerGroup(b),"MODIS"),f.visibleLayers.push(b)),c.length>0&&(f.layers.addBaseLayer(L.layerGroup(c),"ABS"),f.visibleLayers.push(c)),f.visibleLayers.length>0&&f.visibleLayers[0].addTo(l),l.spin(!1)},f.loadAbsData=function(c,d,g,h){a.performAbsQueryLimitTime(g,h).then(function(a){var g=a.results.bindings;b.absVals=g;var h=[];g.forEach(function(a,b,c){console.log("Loading ABS data");var d=a.value.value,g=a.geoSparql.value,i=e(String(g)),j=new L.imageOverlay(d,i,{interactive:!0,opacity:1});f.imageDict[d]=a,f.currentOverlay.push(j),h.push(j)}),f.displayLayers(c,d,h)})},f.loadModisData=function(c,d,g){var h=c;a.performModisQueryLimitTime(d,g,i).then(function(a){var c=a.results.bindings;b.modisVals=c;var i=[];c.forEach(function(a,b,c){var d=a.value.value,g=a.geoSparql.value,h=e(String(g)),j=new L.imageOverlay(d,h,{interactive:!0,opacity:1});f.imageDict[d]=a,f.currentOverlay.push(j),i.push(j)}),f.loadAbsData(h,i,d,g)})},f.colorizeImage=function(a,b,c){if(f.coloredTiles=[],null==a||0==a.length)return console.log("No Landsat Data"),void f.loadModisData(null,b,c);var d,g,h=document.getElementById("invisibleCanvas"),i=new Image,j=h.getContext("2d"),k=a.length-1,l=a[k],m=l.length-1,n=null,o=function(){function p(){j.drawImage(i,0,0);var a=tinycolor(t.color).toHsv().h,b=j.getImageData(0,0,d,g),c=b.data,e=c.length,f=0;if(null==n){var h=new ArrayBuffer(e);n=new Uint8Array(h)}for(;e>f;f+=4){var k=c[f]/255,l=q(a,1,k);n[f]=Math.max(n[f],l.r),n[f+1]=Math.max(n[f+1],l.g),n[f+2]=Math.max(n[f+2],l.b),c[f]=n[f],c[f+1]=n[f+1],c[f+2]=n[f+2]}j.putImageData(b,0,0)}if(m>=0){var r=l[m];m--;var s=r.value.value,t=f.getBand(r.band.value)[0];null!=t?(i.src=s,i.onload=function(){d=h.width=this.width,g=h.height=this.height,p(),o()}):o()}else{var u=document.getElementById("invisibleCanvas").toDataURL(),v=l[0].geoSparql.value,w=e(String(v)),x=new L.imageOverlay(u,w,{interactive:!0,opacity:1});f.imageDict[u]=l,f.currentOverlay.push(x),f.coloredTiles.push(x),k>=0?(l=a[k],k--,m=l.length-1,n=null,o()):f.loadModisData(L.layerGroup(f.coloredTiles),b,c)}};o()},f.refreshOverlay=function(c,d){null==f.bands?f.performQueryLimitTime(c,d):(l.spin(!0),a.performQueryLimitTime(c,d).then(function(a){var e=a.results.bindings;b.jsonVals=e;var g=[],h=[];for(var i in e){var j=e[i],k=j.dggsCell.value.toString();h.indexOf(k)>=0?g[h.indexOf(k)].indexOf(j)<0&&g[h.indexOf(k)].push(j):(g.push([j]),h.push(k))}for(var i in f.currentOverlay)l.removeLayer(f.currentOverlay[i]),null!=f.overlayMaps&&(null!=f.overlayMaps.LandSat&&f.overlayMaps.LandSat.clearOverlay(),null!=f.overlayMaps.Modis&&f.overlayMaps.Modis.clearOverlay());f.currentOverlay=[],f.colorizeImage(g,c,d)}))},b.onSettingSave=function(){0==b.selectedBands().length?(b.show_settings_error_message=!0,b.settings_error_message="Error: Must select at least one band to display"):(b.show_settings_error_message=!1,b.selected_bands=b.selectedBands(),f.refreshOverlay(h,g))},f.setDefaultSettings=function(a){for(var c=b.selected_bands.length;c<a.length;c++)b.selected_bands.push(a[c]);b.selected_bands[3].color="#0000ff",b.selected_bands[3].selected=!0,b.selected_bands[4].color="#00ff00",b.selected_bands[4].selected=!0,b.selected_bands[5].color="#ff0000",b.selected_bands[5].selected=!0};var p=function(a,b,c){return 0>c&&c++,c>1&&c--,1/6>c?a+6*(b-a)*c:.5>c?b:2/3>c?a+(b-a)*(2/3-c)*6:a},q=function(a,b,c){var d,e,f,g,h;return a/=360,0==b?d=e=f=c:(g=.5>c?c*(1+b):c+b-c*b,h=2*c-g,d=p(h,g,a+1/3),e=p(h,g,a),f=p(h,g,a-1/3)),{r:255*d,g:255*e,b:255*f}}}]),angular.module("LEDApp").controller("ChartController",["$scope","SearchService",function(a,b){var c=this;console.log("Loading chart controller"),a.$on("onSelectRegion",function(a,b,d){c.performQueryLimitLocation(b,d)}),c.performQueryLimitLocation=function(c,d){b.performQueryLimitLocation(c,d).then(function(b){var c=b.results.bindings,d=[],e=[];for(var f in c)d.push(moment(c[f].timePeriod.value).format("DD/MM/YY, h:mm:ss a")),e.push(Number(c[f].value.value).toFixed(2));a.data=[e],a.labels=d})},a.barOptions={responsive:!0,scaleBeginAtZero:!1,scaleShowGridLines:!0,scaleGridLineColor:"rgba(255,255,255,.5)",scaleGridLineWidth:1,barShowStroke:!0,barStrokeWidth:.1,barValueSpacing:2,barDatasetSpacing:1,scales:{xAxes:[{display:!1}]}},a.labels=["2006","2007","2008","2009","2010","2011","2012"],a.series=["Values"],a.data=[[0,0,0,0,0,0,0]]}]),angular.module("LEDApp").factory("SPARQLEndpoint",["$http","$q","config",function(a,b,c){var d={};return a.defaults.useXDomain=!0,d._urls=c["sparql-endpoints"],d._getURL=function(){return b(function(b,c){if("_url"in this)return void b(this._url);var d=this._urls.shift();if(void 0===d)return void c("Couldn't find a working endpoint URL");var e={method:"GET",url:d,params:{query:"DESCRIBE <>"},headers:{Accept:"application/sparql-results+json,*/*;q=0.9"}};a(e).then(function(){this._url=d,console.info("Selected endpoint: "+this._url),b(this._url)}.bind(this),function(a){console.warn("Endpoint "+d+" down, status: "+a.status),this._getURL().then(b,c)}.bind(this))}.bind(this))}.bind(d),d.query=function(c){return b(function(b,d){this._getURL().then(function(b){var d={method:"GET",url:b,params:{query:c},headers:{Accept:"application/sparql-results+json,*/*;q=0.9"}};return a(d)}).then(function(a){b(a.data)},function(a){d(a)})}.bind(d))},d}]),angular.module("LEDApp").factory("SearchService",["$http","SPARQLEndpoint",function(a,b){var c={},d=["PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>","PREFIX led: <http://www.anulinkedearth.org/sandbox/ANU-LED#>","PREFIX geo: <http://www.w3.org/2003/01/geo/wgs84_pos#>","PREFIX qb:  <http://purl.org/linked-data/cube#>"],e=["?subject led:etmBand ?band","; led:bounds ?geoSparql","; led:time ?timePeriod","; led:resolution ?resolution","; led:dggsLevelPixel ?dggsLevelPixel","; led:dggsLevelSquare ?dggsLevelSquare","; led:dggsCell ?dggsCell","; geo:lat ?lat","; geo:long ?lon","."],f=["?subject led:latMin ?latMin","; led:longMin ?longMin","; led:latMax ?latMax","; led:longMax ?longMax . "],g=" ?latMin ?longMin ?latMax ?longMax ",h="SELECT ?subject ?geoSparql ?timePeriod ?band ?value ?resolution ?lon ?lat ?dggsLevelSquare ?dggsLevelPixel ?dggsCell",i="SELECT DISTINCT ?subject ?geoSparql ?timePeriod ?band ?value ?resolution ?lon ?lat ?dggsLevelSquare ?dggsLevelPixel",j="ORDER BY ASC(?timePeriod)",k="; qb:dataSet <https://anulinkedearth.org/datasets/LS8_OLI_TIRS_NBAR-dataset>",l="; qb:dataSet <https://anulinkedearth.org/datasets/modis-dataset>",m="; qb:dataSet <https://anulinkedearth.org/datasets/abs-dataset>",n=["SELECT DISTINCT ?timePeriod WHERE {","?subject a qb:Observation .","?subject led:time ?timePeriod","} ORDER BY ASC(?timePeriod)"].join("\n"),o=["SELECT DISTINCT ?band WHERE {","?subject a qb:Observation .","?subject led:etmBand ?band","} ORDER BY ASC(?band)"].join("\n");return c.getDistinctTime=function(){return b.query(d.join("\n")+"\n"+n)},c.getDistinctBands=function(){return b.query(d.join("\n")+"\n"+o).then(function(a){var b=[];for(var c in a.results.bindings)b.push(a.results.bindings[c].band.value);return b})},c.performQueryLimitLocation=function(a,c){var f=d.join("\n")+i+"\nWHERE {\n ?subject a led:Pixel .?subject led:value ?value . \n"+e.join("\n")+'\n?subject led:dggsCell "'+a+'\n"; ?band '+c+"\n.\n}"+j,g=b.query(f);return g.then(function(a){var b=a.results.bindings;b.toString()}),g},c.performQueryLimitTime=function(a,c){var f=d.join("\n")+"\n"+h+"\nWHERE {\n ?subject a led:GridSquare . \n?subject led:imageData ?value .  \n"+e.join("\n")+'\n?subject led:time "'+c+'"^^xsd:dateTime\n'+k+" \n; led:dggsLevelSquare "+a+"\n.\n}\n"+j,g=b.query(f);return g},c.performModisQueryLimitTime=function(a,c,i){var k=d.join("\n")+"\n"+h+g+"\nWHERE {\n ?subject a led:GridSquare . \n?subject led:imageData ?value .  \n"+e.join("\n")+"\n"+f.join("\n")+'\n?subject led:time "'+c+'"^^xsd:dateTime\n'+l+"\n; led:dggsLevelSquare "+a+"\n.\n}\n"+j,m=b.query(k);return m},c.performAbsQueryLimitTime=function(a,c){var f=d.join("\n")+"\n"+h+"\nWHERE {\n ?subject a led:GridSquare . \n?subject led:imageData ?value .  \n"+e.join("\n")+'\n?subject led:time "'+c+'"^^xsd:dateTime\n'+m+"\n; led:dggsLevelSquare "+a+"\n.\n}\n"+j,g=b.query(f);return g},c}]),$.fn.sidebar=function(a){var b=this,c=b.find("ul.sidebar-tabs, .sidebar-tabs > ul"),d=b.children(".sidebar-content").first();return a=$.extend({position:"left"},a||{}),b.addClass("sidebar-"+a.position),c.children("li").children("a").on("click",function(a){a.preventDefault();var c=$(this).closest("li");c.hasClass("active")?b.close():c.hasClass("disabled")||b.open(this.hash.slice(1),c)}),b.find(".sidebar-close").on("click",function(){b.close()}),b.open=function(a,e){"undefined"==typeof e&&(e=c.find('li > a[href="#'+a+'"]').parent()),d.children(".sidebar-pane.active").removeClass("active"),d.children("#"+a).addClass("active"),c.children("li.active").removeClass("active"),e.addClass("active"),b.trigger("content",{id:a}),b.hasClass("collapsed")&&(b.trigger("opening"),b.removeClass("collapsed"))},b.close=function(){c.children("li.active").removeClass("active"),b.hasClass("collapsed")||(b.trigger("closing"),b.addClass("collapsed"))},b},L.Control.Sidebar=L.Control.extend({includes:L.Mixin.Events,options:{position:"left"},initialize:function(a,b){var c,d;for(L.setOptions(this,b),this._sidebar=L.DomUtil.get(a),L.DomUtil.addClass(this._sidebar,"sidebar-"+this.options.position),L.Browser.touch&&L.DomUtil.addClass(this._sidebar,"leaflet-touch"),c=this._sidebar.children.length-1;c>=0;c--)d=this._sidebar.children[c],"DIV"==d.tagName&&L.DomUtil.hasClass(d,"sidebar-content")&&(this._container=d);for(this._tabitems=this._sidebar.querySelectorAll("ul.sidebar-tabs > li, .sidebar-tabs > ul > li"),c=this._tabitems.length-1;c>=0;c--)this._tabitems[c]._sidebar=this;for(this._panes=[],this._closeButtons=[],c=this._container.children.length-1;c>=0;c--)if(d=this._container.children[c],"DIV"==d.tagName&&L.DomUtil.hasClass(d,"sidebar-pane")){this._panes.push(d);for(var e=d.querySelectorAll(".sidebar-close"),f=0,g=e.length;g>f;f++)this._closeButtons.push(e[f])}},addTo:function(a){var b,c;for(this._map=a,b=this._tabitems.length-1;b>=0;b--)c=this._tabitems[b],L.DomEvent.on(c.querySelector("a"),"click",L.DomEvent.preventDefault).on(c.querySelector("a"),"click",this._onClick,c);for(b=this._closeButtons.length-1;b>=0;b--)c=this._closeButtons[b],L.DomEvent.on(c,"click",this._onCloseClick,this);return this},removeFrom:function(a){var b,c;for(this._map=null,b=this._tabitems.length-1;b>=0;b--)c=this._tabitems[b],L.DomEvent.off(c.querySelector("a"),"click",this._onClick);for(b=this._closeButtons.length-1;b>=0;b--)c=this._closeButtons[b],L.DomEvent.off(c,"click",this._onCloseClick,this);return this},open:function(a){var b,c;for(b=this._panes.length-1;b>=0;b--)c=this._panes[b],c.id==a?L.DomUtil.addClass(c,"active"):L.DomUtil.hasClass(c,"active")&&L.DomUtil.removeClass(c,"active");for(b=this._tabitems.length-1;b>=0;b--)c=this._tabitems[b],c.querySelector("a").hash=="#"+a?L.DomUtil.addClass(c,"active"):L.DomUtil.hasClass(c,"active")&&L.DomUtil.removeClass(c,"active");return this.fire("content",{id:a}),L.DomUtil.hasClass(this._sidebar,"collapsed")&&(this.fire("opening"),L.DomUtil.removeClass(this._sidebar,"collapsed")),this},close:function(){for(var a=this._tabitems.length-1;a>=0;a--){var b=this._tabitems[a];L.DomUtil.hasClass(b,"active")&&L.DomUtil.removeClass(b,"active")}return L.DomUtil.hasClass(this._sidebar,"collapsed")||(this.fire("closing"),L.DomUtil.addClass(this._sidebar,"collapsed")),this},_onClick:function(){L.DomUtil.hasClass(this,"active")?this._sidebar.close():L.DomUtil.hasClass(this,"disabled")||this._sidebar.open(this.querySelector("a").hash.slice(1))},_onCloseClick:function(){this.close()}}),L.control.sidebar=function(a,b){return new L.Control.Sidebar(a,b)},angular.module("LEDApp").run(["$templateCache",function(a){a.put("views/charts/barchart.html",'<!-- Sourced from https://github.com/ANU-WALD/aus-env/blob/master/app/views/details/bar.html --> <div ng-controller="ChartController" class="chart-holder"> <div> <canvas id="bar" class="chart chart-bar" chart-data="data" chart-labels="labels" chart-series="series" chart-options="barOptions"> </canvas> <!-- chart-options="barOptions" chart-colours="barColors"\n\n         <a class="download-link" ng-show="bar.download" ng-href="{{bar.download}}"><i class="fa fa-download"></i>&nbspGet the data</a> --> <!-- <span class="pull-right" ng-show="selectedRegionArea">Area: {{selectedRegionArea | number}} km<sup>2</sup></span> --> <!-- <div class="text-center verticaltext_content chart-vertical-position"><span ng-bind-html="bar.units"/></div> --> </div> </div>'),a.put("views/charts/chartHolder.html",'<div class="hidden-xs"> <div class="details-map-tool"> </div> </div>'),a.put("views/charts/timeSeries.html",'<!-- Sourced from https://github.com/ANU-WALD/aus-env/blob/master/app/views/details/timeseries.html --> Test <canvas id="lineserieschart" class="chart chart-line" chart-options="lineOptions" chart-data="lineData" chart-labels="lineLabels" chart-legend="false" chart-series="lineSeries" chart-click="onLineClick" chart-hover="onLineHover"> </canvas>'),a.put("views/search.html",'<nav class="navbar navbar-default navbar-static-top"> <div class="container-fluid"> <!-- Brand and toggle get grouped for better mobile display --> <div class="navbar-header"> <a class="navbar-brand" href="#/">ANU Linked Earth Observations</a> </div> <form class="navbar-form navbar-right"> <div class="form-group"> <rzslider rz-slider-model="sliderDate.value" rz-slider-options="sliderDate.options"> </rzslider> </div> </form> <!-- <div ng-include="\'views/charts/barchart.html\'"></div> --> </div><!-- /.container-fluid --> </nav> <div ng-class="{\'search-result\': sc.hasSearched, \'search-new\': !sc.hasSearched}" ng-cloak="ng-cloak"> <md-content> </md-content> <div class="jumbotron search-show-hide" ng-show="sc.hasSearched" style="clear:both"> <p>Search Result: {{sc.message}}</p> </div> </div> <div id="sidebar" class="sidebar collapsed"> <!-- Nav tabs --> <div class="sidebar-tabs"> <ul role="tablist"> <li><a href="#home" role="tab"><i class="fa fa-bars"></i></a></li> <li><a href="#info" role="tab"><i class="fa fa-info-circle" aria-hidden="true"></i></a></li> <li><a href="#chart" role="tab"><i class="fa fa-bar-chart" aria-hidden="true"></i></a></li> <li><a href="#code" role="tab"><i class="fa fa-code" aria-hidden="true"></i></a></li> </ul> <ul role="tablist"> <li><a href="#settings" role="tab"><i class="fa fa-gear"></i></a></li> </ul> </div> <!-- Tab panes --> <div class="sidebar-content"> <div class="sidebar-pane" id="home"> <h1 class="sidebar-header"> Project Description <span class="sidebar-close"><i class="fa fa-caret-left"></i></span> </h1> <p>TODO: Replace this area with description of project</p> </div> <div class="sidebar-pane" id="info"> <h1 class="sidebar-header">Tile Details<span class="sidebar-close"><i class="fa fa-caret-left"></i></span></h1> <p ng-show="clickedImage == null">No tile selected</p> <div ng-hide="clickedImage == null"> <a href="{{clickedImage.subject.value}}">Link</a> <p>Pixel: {{clickedImage.dggsLevelPixel.value}}</p> <p>Satellite: {{clickedImage.dataSet.value}}</p> <p>Square: {{clickedImage.dggsLevelSquare.value}}</p> <p>Resolution: {{clickedImage.resolution.value}}</p> <p>Location: ({{clickedImage.lat}},{{clickedImage.lon}})</p> </div> </div> <div class="sidebar-pane" id="chart"> <h1 class="sidebar-header">Historical Values<span class="sidebar-close"><i class="fa fa-caret-left"></i></span></h1> <p ng-show="clickedImage == null">No tile selected</p> <div id="graphPane" ng-hide="clickedImage == null"></div> </div> <div class="sidebar-pane" id="code"> <h1 class="sidebar-header">Raw JSON<span class="sidebar-close"><i class="fa fa-caret-left"></i></span></h1> Landsat: <pre>{{jsonVals|json}}</pre> MODIS: <pre>{{absVals|json}}</pre> ABS: <pre>{{modisVals|json}}</pre> </div> <div class="sidebar-pane" id="settings"> <h1 class="sidebar-header">Settings<span class="sidebar-close"><i class="fa fa-caret-left"></i></span></h1> <div ng-show="show_settings_error_message" class="alert alert-danger" role="alert">{{settings_error_message}}</div> <b>Band Selection:</b> <li ng-hide="bandList.length">No Bands available</li> <div ng-repeat="band in bandList" band-colorpicker="{{band}}"> <input type="checkbox" name="selectedBands[]" value="{{band.name}}" ng-model="band.selected"> Band: {{band.name}} <color-picker ng-model="band.color" options="color_picker_options"></color-picker> </div> <hr> <!--<pre>{{selectedBands()|json}}</pre>--> <button class="btn btn-primary" ng-click="onSettingSave()">Save</button> </div> </div> </div> <canvas id="invisibleCanvas" ng-hide="true"></canvas> <div id="mapid" center="mapCenter" controls layers="layers" defaults="defaults"></div>'),a.put("views/sidebar/bandCheckBox.html",'<div class="checkbox"> <label> <input type="checkbox"> {{band.name}} </label> <div id="{{band.name}}" class="input-group colorpicker-component"> <input type="text" value="#00AABB" class="form-control"> <span class="input-group-addon"><i></i> </span> </div> </div>')}]);